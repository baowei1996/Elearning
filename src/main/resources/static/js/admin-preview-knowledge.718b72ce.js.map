{"version":3,"sources":["webpack:///./src/pages/admin/preview/index.vue?c273","webpack:///./src/pages/admin/preview/KnowledgePreview.vue?880c","webpack:///src/pages/admin/preview/KnowledgePreview.vue","webpack:///./src/pages/admin/preview/KnowledgePreview.vue?3f55","webpack:///./src/pages/admin/preview/KnowledgePreview.vue","webpack:///src/pages/admin/preview/index.vue","webpack:///./src/pages/admin/preview/index.vue?8095","webpack:///./src/pages/admin/preview/index.vue","webpack:///./src/pages/admin/preview/KnowledgePreview.vue?e01b"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","ref","file","handleExceed","change_file_list","handleRemove","handleSuccess","staticClass","_v","slot","sectionViewMap","_e","staticRenderFns","_l","sectionView","key","sid","domProps","_s","sectionNameHtml","knowledge","kid","knowledgeNameHtml","paragraph","pid","paragraphContentHtml","name","props","Array","data","methods","component","components","converter","created","setOption","$message","warning","_this","form","append","raw","lock","text","spinner","makeHtml","console","log","response","handlePreview","fileList"],"mappings":"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","file":"js/admin-preview-knowledge.718b72ce.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-row',{attrs:{\"col\":\"12\"}},[_c('el-upload',{ref:\"upload\",attrs:{\"action\":\"/backstage/course/preview\",\"name\":\"fileList\",\"drag\":\"\",\"file-list\":_vm.file,\"limit\":2,\"on-exceed\":_vm.handleExceed,\"on-change\":_vm.change_file_list,\"on-remove\":_vm.handleRemove,\"on-success\":_vm.handleSuccess,\"with-credentials\":true,\"auto-upload\":false}},[_c('i',{staticClass:\"el-icon-upload\"}),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"\\n      将文件拖到此处，或\\n      \"),_c('em',[_vm._v(\"点击预览\")])]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"只能上传md文件，且内容不宜过长\")])]),(_vm.file[0])?_c('knowledge-preview',{attrs:{\"sectionViewMap\":_vm.sectionViewMap}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',_vm._l((_vm.sectionViewMap),function(sectionView){return _c('div',{key:sectionView.sid,staticClass:\"section\"},[_c('div',{staticClass:\"section-name\",domProps:{\"innerHTML\":_vm._s(sectionView.sectionNameHtml)}}),_vm._l((sectionView.knowledgeViews),function(knowledge){return _c('div',{key:knowledge.kid},[_c('div',{staticClass:\"section-knowledge-name\",domProps:{\"innerHTML\":_vm._s(knowledge.knowledgeNameHtml)}}),_vm._l((knowledge.paragraphs),function(paragraph){return _c('div',{key:paragraph.pid},[_c('div',{staticClass:\"section-knowledge-paragraph\"},[_c('div',{staticClass:\"section-knowledge-paragraph-content\",domProps:{\"innerHTML\":_vm._s(paragraph.paragraphContentHtml)}})])])})],2)})],2)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--预览知识见解-->\r\n<template>\r\n  <div>\r\n    <div class=\"section\" v-for=\"sectionView in sectionViewMap\" :key=\"sectionView.sid\">\r\n      <div class=\"section-name\" v-html=\"sectionView.sectionNameHtml\"></div>\r\n      <div v-for=\"knowledge in sectionView.knowledgeViews\" :key=\"knowledge.kid\">\r\n        <div class=\"section-knowledge-name\" v-html=\"knowledge.knowledgeNameHtml\"></div>\r\n        <div v-for=\"paragraph in knowledge.paragraphs\" :key=\"paragraph.pid\">\r\n          <div class=\"section-knowledge-paragraph\">\r\n            <div\r\n              class=\"section-knowledge-paragraph-content\"\r\n              v-html=\"paragraph.paragraphContentHtml\"\r\n            ></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"KnowledgeSection\",\r\n  props: {\r\n    sectionViewMap: Array\r\n  },\r\n  data: function() {\r\n    return {};\r\n  },\r\n  methods: {}\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.section {\r\n  text-align: left;\r\n  margin: 1vmin 5vmin 0 5vmin;\r\n  padding: 3vmin;\r\n  border: 1px solid #a7d7f9;\r\n}\r\n\r\n.section-name {\r\n  padding: 1vmin 0;\r\n  font-size: 3.5vmin;\r\n}\r\n\r\n.section-knowledge-name {\r\n  padding: 1vmin 0;\r\n  font-size: 3vmin;\r\n}\r\n\r\n.section-knowledge-paragraph {\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.section-knowledge-paragraph:hover {\r\n  background-color: #e3f3f7;\r\n}\r\n\r\n.section-knowledge-paragraph-content {\r\n  padding: 2vmin 0;\r\n  font-size: 2vmin;\r\n  width: 100%;\r\n\r\n  pre {\r\n    overflow: hidden;\r\n    width: 50vw;\r\n  }\r\n\r\n  img {\r\n    width: 50vw;\r\n    margin: 1vw;\r\n  }\r\n}\r\n</style>>\r\n","import mod from \"-!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./KnowledgePreview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./KnowledgePreview.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./KnowledgePreview.vue?vue&type=template&id=5cb10fb7&\"\nimport script from \"./KnowledgePreview.vue?vue&type=script&lang=js&\"\nexport * from \"./KnowledgePreview.vue?vue&type=script&lang=js&\"\nimport style0 from \"./KnowledgePreview.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<!--上传要预览的知识见解-->\r\n<template>\r\n  <el-row col=\"12\">\r\n    <el-upload\r\n      action=\"/backstage/course/preview\"\r\n      ref=\"upload\"\r\n      name=\"fileList\"\r\n      drag\r\n      :file-list=\"file\"\r\n      :limit=\"2\"\r\n      :on-exceed=\"handleExceed\"\r\n      :on-change=\"change_file_list\"\r\n      :on-remove=\"handleRemove\"\r\n      :on-success=\"handleSuccess\"\r\n      :with-credentials=\"true\"\r\n      :auto-upload=\"false\"\r\n    >\r\n      <i class=\"el-icon-upload\"></i>\r\n      <div class=\"el-upload__text\">\r\n        将文件拖到此处，或\r\n        <em>点击预览</em>\r\n      </div>\r\n      <div class=\"el-upload__tip\" slot=\"tip\">只能上传md文件，且内容不宜过长</div>\r\n    </el-upload>\r\n\r\n    <knowledge-preview v-if=\"file[0]\" :sectionViewMap=\"sectionViewMap\"></knowledge-preview>\r\n  </el-row>\r\n</template>\r\n\r\n\r\n<script>\r\nimport showdown from \"showdown\";\r\nimport KnowledgePreview from \"./KnowledgePreview\";\r\nimport { parse, getInstance } from \"../../../tools\";\r\n\r\nexport default {\r\n  components: { KnowledgePreview },\r\n  data() {\r\n    return {\r\n      file: [],\r\n      sectionViewMap: [],\r\n      converter: null\r\n    };\r\n  },\r\n  created() {\r\n    this.converter = new showdown.Converter();\r\n    this.converter.setOption(\"tables\", true);\r\n    this.converter.setOption(\"simpleLineBreaks\", true);\r\n  },\r\n  methods: {\r\n    handleExceed(files, fileList) {\r\n      this.$message.warning(`一次只能预览一个文件`);\r\n    },\r\n    change_file_list(file, flist) {\r\n      let _this = this;\r\n      _this.file = [file];\r\n\r\n      let form = new FormData();\r\n      form.append(\"file\", file.raw);\r\n\r\n      const loading = _this.$loading({\r\n        lock: true,\r\n        text: \"加载中\",\r\n        spinner: \"el-icon-loading\"\r\n      });\r\n\r\n      getInstance()\r\n        .post(\"/backstage/course/preview\", form)\r\n        .then(res => {\r\n          console.log(res.data);\r\n          if (res.data.code === 200) {\r\n            let sectionViewMap = [];\r\n            for (let key in res.data.data.sectionViewMap) {\r\n              let sectionView = res.data.data.sectionViewMap[key];\r\n              if (sectionView) {\r\n                // 将markdown转换为html\r\n                sectionView.sectionNameHtml = _this.converter.makeHtml(\r\n                  parse(sectionView.sectionName)\r\n                );\r\n                for (const knowledge of sectionView.knowledgeViews) {\r\n                  knowledge.knowledgeNameHtml = _this.converter.makeHtml(\r\n                    parse(knowledge.knowledgeName)\r\n                  );\r\n                  for (const paragraph of knowledge.paragraphs) {\r\n                    let paragraphContentHtml = _this.converter.makeHtml(\r\n                      parse(paragraph.paragraphContent)\r\n                    );\r\n                    if (paragraphContentHtml.indexOf(\"<pre\") !== -1) {\r\n                      paragraphContentHtml = paragraphContentHtml.replace(\r\n                        \"<pre\",\r\n                        '<pre class=\"code-content\"'\r\n                      );\r\n                    } else if (paragraphContentHtml.indexOf(\"<img\") !== -1) {\r\n                      paragraphContentHtml = paragraphContentHtml.replace(\r\n                        \"<img\",\r\n                        '<img class=\"img-content\"'\r\n                      );\r\n                    }\r\n                    paragraph.paragraphContentHtml = paragraphContentHtml;\r\n                  }\r\n                }\r\n                sectionViewMap.push(sectionView);\r\n              }\r\n              _this.sectionViewMap = sectionViewMap;\r\n              loading.close();\r\n            }\r\n          } else {\r\n            loading.close();\r\n            _this.$message({ message: res.data.message, type: \"warning\" });\r\n          }\r\n        })\r\n        .catch(res => {\r\n          loading.close();\r\n          console.log(JSON.stringify(res));\r\n          _this.$message({ message: \"请上传格式正确的文件\", type: \"warning\" });\r\n        });\r\n    },\r\n    handleSuccess(response, file, fileList) {\r\n      console.log(file, response);\r\n    },\r\n    handlePreview(file) {\r\n      console.log(file);\r\n    },\r\n    handleRemove(file, fileList) {\r\n      console.log(file, fileList);\r\n    }\r\n  }\r\n};\r\n</script>","import mod from \"-!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=38bda2ca&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/_mini-css-extract-plugin@0.6.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./KnowledgePreview.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.6.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/_css-loader@1.0.1@css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/_vue-loader@15.7.1@vue-loader/lib/index.js??vue-loader-options!./KnowledgePreview.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}