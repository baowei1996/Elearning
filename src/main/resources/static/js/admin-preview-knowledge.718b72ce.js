(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin-preview-knowledge"],{"0e22":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{attrs:{col:"12"}},[n("el-upload",{ref:"upload",attrs:{action:"/backstage/course/preview",name:"fileList",drag:"","file-list":e.file,limit:2,"on-exceed":e.handleExceed,"on-change":e.change_file_list,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"with-credentials":!0,"auto-upload":!1}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[e._v("\n      将文件拖到此处，或\n      "),n("em",[e._v("点击预览")])]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传md文件，且内容不宜过长")])]),e.file[0]?n("knowledge-preview",{attrs:{sectionViewMap:e.sectionViewMap}}):e._e()],1)},i=[],o=(n("34a3"),n("0eb5"),n("a4c5"),n("f763"),n("aa29")),s=n.n(o),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.sectionViewMap,function(t){return n("div",{key:t.sid,staticClass:"section"},[n("div",{staticClass:"section-name",domProps:{innerHTML:e._s(t.sectionNameHtml)}}),e._l(t.knowledgeViews,function(t){return n("div",{key:t.kid},[n("div",{staticClass:"section-knowledge-name",domProps:{innerHTML:e._s(t.knowledgeNameHtml)}}),e._l(t.paragraphs,function(t){return n("div",{key:t.pid},[n("div",{staticClass:"section-knowledge-paragraph"},[n("div",{staticClass:"section-knowledge-paragraph-content",domProps:{innerHTML:e._s(t.paragraphContentHtml)}})])])})],2)})],2)}),0)},l=[],c={name:"KnowledgeSection",props:{sectionViewMap:Array},data:function(){return{}},methods:{}},d=c,p=(n("1cc0"),n("6691")),u=Object(p["a"])(d,r,l,!1,null,null,null),m=u.exports,v=n("83af"),f={components:{KnowledgePreview:m},data:function(){return{file:[],sectionViewMap:[],converter:null}},created:function(){this.converter=new s.a.Converter,this.converter.setOption("tables",!0),this.converter.setOption("simpleLineBreaks",!0)},methods:{handleExceed:function(e,t){this.$message.warning("一次只能预览一个文件")},change_file_list:function(e,t){var n=this;n.file=[e];var a=new FormData;a.append("file",e.raw);var i=n.$loading({lock:!0,text:"加载中",spinner:"el-icon-loading"});Object(v["c"])().post("/backstage/course/preview",a).then(function(e){if(console.log(e.data),200===e.data.code){var t=[];for(var a in e.data.data.sectionViewMap){var o=e.data.data.sectionViewMap[a];if(o){o.sectionNameHtml=n.converter.makeHtml(Object(v["e"])(o.sectionName));var s=!0,r=!1,l=void 0;try{for(var c,d=o.knowledgeViews[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var p=c.value;p.knowledgeNameHtml=n.converter.makeHtml(Object(v["e"])(p.knowledgeName));var u=!0,m=!1,f=void 0;try{for(var g,w=p.paragraphs[Symbol.iterator]();!(u=(g=w.next()).done);u=!0){var h=g.value,k=n.converter.makeHtml(Object(v["e"])(h.paragraphContent));-1!==k.indexOf("<pre")?k=k.replace("<pre",'<pre class="code-content"'):-1!==k.indexOf("<img")&&(k=k.replace("<img",'<img class="img-content"')),h.paragraphContentHtml=k}}catch(_){m=!0,f=_}finally{try{u||null==w.return||w.return()}finally{if(m)throw f}}}}catch(_){r=!0,l=_}finally{try{s||null==d.return||d.return()}finally{if(r)throw l}}t.push(o)}n.sectionViewMap=t,i.close()}}else i.close(),n.$message({message:e.data.message,type:"warning"})}).catch(function(e){i.close(),console.log(JSON.stringify(e)),n.$message({message:"请上传格式正确的文件",type:"warning"})})},handleSuccess:function(e,t,n){console.log(t,e)},handlePreview:function(e){console.log(e)},handleRemove:function(e,t){console.log(e,t)}}},g=f,w=Object(p["a"])(g,a,i,!1,null,null,null);t["default"]=w.exports},"1cc0":function(e,t,n){"use strict";var a=n("4f38"),i=n.n(a);i.a},"4f38":function(e,t,n){}}]);
//# sourceMappingURL=admin-preview-knowledge.718b72ce.js.map