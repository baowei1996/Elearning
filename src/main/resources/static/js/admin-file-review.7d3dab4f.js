(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin-file-review"],{"0e44":function(t,e,n){var r=n("88dd"),a=n("a013"),i=function(t,e){if(a(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n("01f5")(Function.call,n("acb9").f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(a){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:i}},"38bc":function(t,e,n){var r,a;
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */(function(i,o){r=o,a="function"===typeof r?r.call(e,n,e,t):r,void 0===a||(t.exports=a)})(0,function(){var t={version:"0.2.0"},e=t.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function n(t,e,n){return t<e?e:t>n?n:t}function r(t){return 100*(-1+t)}function a(t,n,a){var i;return i="translate3d"===e.positionUsing?{transform:"translate3d("+r(t)+"%,0,0)"}:"translate"===e.positionUsing?{transform:"translate("+r(t)+"%,0)"}:{"margin-left":r(t)+"%"},i.transition="all "+n+"ms "+a,i}t.configure=function(t){var n,r;for(n in t)r=t[n],void 0!==r&&t.hasOwnProperty(n)&&(e[n]=r);return this},t.status=null,t.set=function(r){var s=t.isStarted();r=n(r,e.minimum,1),t.status=1===r?null:r;var u=t.render(!s),c=u.querySelector(e.barSelector),l=e.speed,f=e.easing;return u.offsetWidth,i(function(n){""===e.positionUsing&&(e.positionUsing=t.getPositioningCSS()),o(c,a(r,l,f)),1===r?(o(u,{transition:"none",opacity:1}),u.offsetWidth,setTimeout(function(){o(u,{transition:"all "+l+"ms linear",opacity:0}),setTimeout(function(){t.remove(),n()},l)},l)):setTimeout(n,l)}),this},t.isStarted=function(){return"number"===typeof t.status},t.start=function(){t.status||t.set(0);var n=function(){setTimeout(function(){t.status&&(t.trickle(),n())},e.trickleSpeed)};return e.trickle&&n(),this},t.done=function(e){return e||t.status?t.inc(.3+.5*Math.random()).set(1):this},t.inc=function(e){var r=t.status;return r?("number"!==typeof e&&(e=(1-r)*n(Math.random()*r,.1,.95)),r=n(r+e,0,.994),t.set(r)):t.start()},t.trickle=function(){return t.inc(Math.random()*e.trickleRate)},function(){var e=0,n=0;t.promise=function(r){return r&&"resolved"!==r.state()?(0===n&&t.start(),e++,n++,r.always(function(){n--,0===n?(e=0,t.done()):t.set((e-n)/e)}),this):this}}(),t.render=function(n){if(t.isRendered())return document.getElementById("nprogress");u(document.documentElement,"nprogress-busy");var a=document.createElement("div");a.id="nprogress",a.innerHTML=e.template;var i,s=a.querySelector(e.barSelector),c=n?"-100":r(t.status||0),l=document.querySelector(e.parent);return o(s,{transition:"all 0 linear",transform:"translate3d("+c+"%,0,0)"}),e.showSpinner||(i=a.querySelector(e.spinnerSelector),i&&f(i)),l!=document.body&&u(l,"nprogress-custom-parent"),l.appendChild(a),a},t.remove=function(){c(document.documentElement,"nprogress-busy"),c(document.querySelector(e.parent),"nprogress-custom-parent");var t=document.getElementById("nprogress");t&&f(t)},t.isRendered=function(){return!!document.getElementById("nprogress")},t.getPositioningCSS=function(){var t=document.body.style,e="WebkitTransform"in t?"Webkit":"MozTransform"in t?"Moz":"msTransform"in t?"ms":"OTransform"in t?"O":"";return e+"Perspective"in t?"translate3d":e+"Transform"in t?"translate":"margin"};var i=function(){var t=[];function e(){var n=t.shift();n&&n(e)}return function(n){t.push(n),1==t.length&&e()}}(),o=function(){var t=["Webkit","O","Moz","ms"],e={};function n(t){return t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(t,e){return e.toUpperCase()})}function r(e){var n=document.body.style;if(e in n)return e;var r,a=t.length,i=e.charAt(0).toUpperCase()+e.slice(1);while(a--)if(r=t[a]+i,r in n)return r;return e}function a(t){return t=n(t),e[t]||(e[t]=r(t))}function i(t,e,n){e=a(e),t.style[e]=n}return function(t,e){var n,r,a=arguments;if(2==a.length)for(n in e)r=e[n],void 0!==r&&e.hasOwnProperty(n)&&i(t,n,r);else i(t,a[1],a[2])}}();function s(t,e){var n="string"==typeof t?t:l(t);return n.indexOf(" "+e+" ")>=0}function u(t,e){var n=l(t),r=n+e;s(n,e)||(t.className=r.substring(1))}function c(t,e){var n,r=l(t);s(t,e)&&(n=r.replace(" "+e+" "," "),t.className=n.substring(1,n.length-1))}function l(t){return(" "+(t.className||"")+" ").replace(/\s+/gi," ")}function f(t){t&&t.parentNode&&t.parentNode.removeChild(t)}return t})},"44de":function(t,e,n){var r=n("88dd"),a=n("0e44").set;t.exports=function(t,e,n){var i,o=e.constructor;return o!==n&&"function"==typeof o&&(i=o.prototype)!==n.prototype&&r(i)&&a&&a(t,i),t}},5326:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",{attrs:{col:"12"}},[n("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"待审核",name:"review"}},[n("file-table",{attrs:{buttonShow:[1,1,1,1,0,0],tableData:t.tableData,loading:t.loading,status:t.status},on:{handlePreview:t.handlePreview,handleDownload:t.handleDownload,modifyFileStatus:t.modifyFileStatus,changePage:t.getFileList}})],1),n("el-tab-pane",{attrs:{label:"已通过",name:"passed"}},[n("file-table",{attrs:{buttonShow:[0,0,0,0,1,0],tableData:t.tableData,loading:t.loading,status:t.status},on:{modifyFileStatus:t.modifyFileStatus,changePage:t.getFileList}})],1),n("el-tab-pane",{attrs:{label:"未通过",name:"unpass"}},[n("file-table",{attrs:{buttonShow:[0,0,0,0,1,1],tableData:t.tableData,loading:t.loading,status:t.status},on:{modifyFileStatus:t.modifyFileStatus,changePage:t.getFileList}})],1)],1)],1)},a=[],i=(n("7364"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[n("el-table-column",{attrs:{prop:"fileName",label:"文件名",width:"300",align:"center"}}),n("el-table-column",{attrs:{prop:"upperName",label:"上传者",width:"150",align:"center"}}),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.buttonShow[0]?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return t.handlePreview(e.row)}}},[t._v("预览\n            ")]):t._e(),t.buttonShow[1]?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return t.handleDownload(e.row)}}},[t._v("下载\n            ")]):t._e(),t.buttonShow[2]?n("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(n){return t.modifyFileStatus(e.row,1)}}},[t._v("通过\n            ")]):t._e(),t.buttonShow[3]?n("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(n){return t.modifyFileStatus(e.row,3)}}},[t._v("不通过\n            ")]):t._e(),t.buttonShow[4]?n("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(n){return t.modifyFileStatus(e.row,2)}}},[t._v("重新审核\n            ")]):t._e(),t.buttonShow[5]?n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){return t.modifyFileStatus(e.row,4)}}},[t._v("删除\n            ")]):t._e()]}}])})],1)}),o=[],s=(n("d4d5"),{props:{tableData:Array,buttonShow:Array,loading:Boolean,status:Number},data:function(){return{}},methods:{handlePreview:function(t){this.$emit("handlePreview",t.fid,t.fileName)},handleDownload:function(t){this.$emit("handleDownload",t.fid)},modifyFileStatus:function(t,e){this.showBox(t,e)},showBox:function(t,e){var n=this;this.$confirm("此操作将更改文件状态, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.$emit("modifyFileStatus",t.fid,e)}).catch(function(){n.$message({type:"info",message:"已取消操作"})})}}}),u=s,c=n("6691"),l=Object(c["a"])(u,i,o,!1,null,null,null),f=l.exports,d=n("8ad4"),p={components:{fileTable:f},data:function(){return{activeName:"review",page:1,status:2,tableData:[],loading:!0}},mounted:function(){this.getFileList(1,this.status)},methods:{handleClick:function(t){this.loading=!0,"review"===t.name&&(this.getFileList(1,2),this.status=2),"passed"===t.name&&(this.getFileList(1,1),this.status=1),"unpass"===t.name&&(this.getFileList(1,3),this.status=3)},handlePreview:function(t,e){if(/\.(?:pdf)$/.test(e)){console.log("预览文件"+t),this.$store.commit("setFid",t);var n=this.$fn.getLocation(window.location.href),r=n.protocol+"//"+n.host;window.open(r+"/admin/previewFile?fid="+t)}else this.$message.warning("目前只支持预览PDF文件哦~")},handleDownload:function(t){if(this.$fn.isLogin()){var e=this.$fn.getLocation(window.location.href),n=e.protocol+"//"+e.host;window.open(n+"/file/download?fid="+t+"&uid=0")}else this.$fn.routerChange("/user/login",this)},modifyFileStatus:function(t,e){var n=this;console.log(t,e);var r={fid:t,status:e};Object(d["c"])(r,function(t){console.log(t),200===t.code?(n.$message.success("修改成功"),n.loading=!0,n.getFileList(n.page,n.status)):n.$message.error("修改失败")})},getFileList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r={keyWord:"",fileCourse:"",page:e,order:!0,status:n};Object(d["a"])(r,function(e){t.loading=!1,t.tableData=e.data.files})}}},m=p,h=Object(c["a"])(m,r,a,!1,null,null,null);e["default"]=h.exports},"539d":function(t,e,n){var r=n("b2f5"),a=n("f01a"),i=n("b6f1"),o=n("c9ea4"),s="["+o+"]",u="​",c=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),f=function(t,e,n){var a={},s=i(function(){return!!o[t]()||u[t]()!=u}),c=a[t]=s?e(d):o[t];n&&(a[n]=c),r(r.P+r.F*s,"String",a)},d=f.trim=function(t,e){return t=String(a(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(l,"")),t};t.exports=f},"70e7":function(t,e,n){},7364:function(t,e,n){var r=n("ddf7").f,a=Function.prototype,i=/^\s*function ([^ (]*)/,o="name";o in a||n("dad2")&&r(a,o,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},"8ad4":function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return s});var r=n("c3de"),a=new r["a"],i=function(t){return a.uploadFileInstance().post("/backstage/course/preview",t)},o=function(t,e){return a.post("/admin/modifyFileStatus",t,e)},s=function(t,e){return a.get("/admin/getUncheckFiles",t,e)}},"98d4":function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return r})},a891:function(t,e,n){var r=n("fb6d"),a=n("b4e0").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,a)}},ab1f:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",function(){return a})},acb9:function(t,e,n){var r=n("d217"),a=n("7dea"),i=n("3a68"),o=n("5325"),s=n("03b3"),u=n("568a"),c=Object.getOwnPropertyDescriptor;e.f=n("dad2")?c:function(t,e){if(t=i(t),e=o(e,!0),u)try{return c(t,e)}catch(n){}if(s(t,e))return a(!r.f.call(t,e),t[e])}},c3de:function(t,e,n){"use strict";n.d(e,"a",function(){return g});var r=n("98d4"),a=n("ab1f"),i=n("eaf6"),o=n("2427"),s=n.n(o),u=n("38bc"),c=n.n(u),l=(n("70e7"),n("aa47")),f=n.n(l),d="application/x-www-form-urlencoded",p="multipart/form-data",m="http://sharingideas.cn/",h=new i["default"],g=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;Object(r["a"])(this,t),this._axiosInstance=this.createInstance(e)}return Object(a["a"])(t,[{key:"createInstance",value:function(t){var e=s.a.create({transformRequest:[function(t){return t=f.a.stringify(t),t}],headers:{"Content-Type":t},timeout:15e3,withCredentials:!0,baseURL:m});return e.interceptors.response.use(function(t){return 200===t.data.code?Promise.resolve(t.data):Promise.reject(t.data)},function(t){var e=t.response;if(e)return Promise.reject(e.data);h.$message.error("网络似乎出了一些状况")}),e}},{key:"uploadFileInstance",value:function(){return s.a.create({headers:{"Content-Type":p},withCredentials:!0,baseURL:m})}},{key:"get",value:function(t,e,n){return c.a.start(),this.axiosInstance.get(t,{params:e}).then(function(t){return c.a.done(),n(t)},function(t){throw c.a.done(),h.$message({showClose:!0,message:t.message,type:"error"}),new Error("出错啦")}).catch(function(t){c.a.done(),console.log(t)})}},{key:"post",value:function(t,e,n){return c.a.start(),this.axiosInstance.post(t,e,{transformRequest:[function(t){var e="";for(var n in t)e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n])+"&";return e}],withCredentials:!0}).then(function(t){return c.a.done(),n(t)},function(t){throw c.a.done(),h.$message({showClose:!0,message:t.message,type:"error"}),new Error("出错啦")}).catch(function(t){c.a.done(),console.log(t)})}},{key:"axiosInstance",get:function(){return this._axiosInstance}}]),t}()},c9ea4:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},d4d5:function(t,e,n){"use strict";var r=n("3754"),a=n("03b3"),i=n("94ac"),o=n("44de"),s=n("5325"),u=n("b6f1"),c=n("a891").f,l=n("acb9").f,f=n("ddf7").f,d=n("539d").trim,p="Number",m=r[p],h=m,g=m.prototype,v=i(n("a7b8")(g))==p,b="trim"in String.prototype,w=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=b?e.trim():d(e,3);var n,r,a,i=e.charCodeAt(0);if(43===i||45===i){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+e}for(var o,u=e.slice(2),c=0,l=u.length;c<l;c++)if(o=u.charCodeAt(c),o<48||o>a)return NaN;return parseInt(u,r)}}return+e};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof m&&(v?u(function(){g.valueOf.call(n)}):i(n)!=p)?o(new h(w(e)),n,m):w(e)};for(var y,S=n("dad2")?c(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;S.length>_;_++)a(h,y=S[_])&&!a(m,y)&&f(m,y,l(h,y));m.prototype=g,g.constructor=m,n("e5ef")(r,p,m)}}}]);
//# sourceMappingURL=admin-file-review.7d3dab4f.js.map